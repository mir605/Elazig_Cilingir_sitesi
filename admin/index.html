<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - MURAT OTO ANAHTAR</title>
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Admin CSS -->
    <link rel="stylesheet" href="css/admin.css">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="js/security.js"></script>
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <nav class="admin-sidebar">
            <div class="admin-logo">
                <h2>ðŸ”‘ Admin Panel</h2>
                <p>MURAT OTO ANAHTAR</p>
            </div>
            
            <ul class="admin-menu">
                <li class="menu-item active" data-section="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Ana Panel</span>
                </li>
                <li class="menu-item" data-section="comments">
                    <i class="fas fa-comments"></i>
                    <span>Yorumlar</span>
                    <span class="badge" id="pending-comments-badge">0</span>
                </li>
                <li class="menu-item" data-section="users">
                    <i class="fas fa-users"></i>
                    <span>KullanÄ±cÄ±lar</span>
                </li>
                <li class="menu-item" data-section="messages">
                    <i class="fas fa-envelope"></i>
                    <span>Ä°letiÅŸim MesajlarÄ±</span>
                    <span class="badge" id="new-messages-badge">0</span>
                </li>
                <li class="menu-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span>Ayarlar</span>
                </li>
            </ul>
            
            <div class="admin-footer">
                <button id="logout-btn" class="btn btn-secondary" onclick="adminLogout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Ã‡Ä±kÄ±ÅŸ Yap
                </button>
            </div>
        </nav>

        <!-- Main Content -->
        <main class="admin-main">
            <!-- Header -->
            <header class="admin-header">
                <div class="header-left">
                    <button class="mobile-menu-btn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="page-title">Ana Panel</h1>
                </div>
                <div class="header-right">
                    <div class="admin-user">
                        <i class="fas fa-user-shield"></i>
                        <span>Administrator</span>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div class="admin-content">
                <!-- Dashboard Section -->
                <section id="dashboard-section" class="content-section active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-comments"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-comments">0</h3>
                                <p>Toplam Yorum</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="pending-comments">0</h3>
                                <p>Bekleyen Yorum</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-users">0</h3>
                                <p>Toplam KullanÄ±cÄ±</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-envelope"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="new-messages">0</h3>
                                <p>Yeni Mesaj</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-charts">
                        <div class="chart-container">
                            <h3>Son Yorumlar</h3>
                            <div id="recent-comments" class="recent-items">
                                <!-- Recent comments will be loaded here -->
                            </div>
                        </div>
                        
                        <div class="chart-container">
                            <h3>Son Mesajlar</h3>
                            <div id="recent-messages" class="recent-items">
                                <!-- Recent messages will be loaded here -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Comments Section -->
                <section id="comments-section" class="content-section">
                    <div class="section-header">
                        <h2>Yorum YÃ¶netimi</h2>
                        <div class="section-filters">
                            <select id="comments-filter" class="form-select">
                                <option value="all">TÃ¼m Yorumlar</option>
                                <option value="pending">Bekleyenler</option>
                                <option value="approved">Onaylananlar</option>
                                <option value="rejected">Reddedilenler</option>
                            </select>
                            <button id="refresh-comments" class="btn btn-secondary">
                                <i class="fas fa-sync"></i>
                                Yenile
                            </button>
                        </div>
                    </div>
                    
                    <div class="comments-grid" id="comments-grid">
                        <!-- Comments will be loaded here as cards -->
                    </div>
                    
                    <div class="pagination" id="comments-pagination">
                        <!-- Pagination will be generated here -->
                    </div>
                </section>

                <!-- Users Section -->
                <section id="users-section" class="content-section">
                    <div class="section-header">
                        <h2>KullanÄ±cÄ± YÃ¶netimi</h2>
                        <div class="section-filters">
                            <input type="text" id="users-search" placeholder="KullanÄ±cÄ± ara..." class="form-input">
                            <button id="refresh-users" class="btn btn-secondary">
                                <i class="fas fa-sync"></i>
                                Yenile
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="users-table" class="admin-table">
                            <thead>
                                <tr>
                                    <th>KullanÄ±cÄ± AdÄ±</th>
                                    <th>GÃ¶rÃ¼nen Ad</th>
                                    <th>E-posta</th>
                                    <th>KayÄ±t Tarihi</th>
                                    <th>Durum</th>
                                    <th>Ä°ÅŸlemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Users will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Messages Section -->
                <section id="messages-section" class="content-section">
                    <div class="section-header">
                        <h2>Ä°letiÅŸim MesajlarÄ±</h2>
                        <div class="section-filters">
                            <select id="messages-filter" class="form-select">
                                <option value="all">TÃ¼m Mesajlar</option>
                                <option value="new">Yeniler</option>
                                <option value="read">OkunmuÅŸ</option>
                            </select>
                            <button id="refresh-messages" class="btn btn-secondary">
                                <i class="fas fa-sync"></i>
                                Yenile
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table id="messages-table" class="admin-table">
                            <thead>
                                <tr>
                                    <th>Ad</th>
                                    <th>E-posta</th>
                                    <th>Telefon</th>
                                    <th>Konu</th>
                                    <th>Durum</th>
                                    <th>Tarih</th>
                                    <th>Ä°ÅŸlemler</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Messages will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Settings Section -->
                <section id="settings-section" class="content-section">
                    <div class="section-header">
                        <h2>Site AyarlarÄ±</h2>
                    </div>
                    
                    <div class="settings-container">
                        <form id="settings-form" class="settings-form">
                            <div class="form-group">
                                <label for="site_title">Site BaÅŸlÄ±ÄŸÄ±</label>
                                <input type="text" id="site_title" name="site_title" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="admin_email">Admin E-posta</label>
                                <input type="email" id="admin_email" name="admin_email" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="phone_number">Telefon NumarasÄ±</label>
                                <input type="tel" id="phone_number" name="phone_number" class="form-input">
                            </div>
                            
                            <div class="form-group">
                                <label for="business_address">Ä°ÅŸletme Adresi</label>
                                <textarea id="business_address" name="business_address" class="form-textarea" rows="3"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="comments_auto_approve" name="comments_auto_approve">
                                    <span class="checkmark"></span>
                                    YorumlarÄ± Otomatik Onayla
                                </label>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i>
                                    AyarlarÄ± Kaydet
                                </button>
                            </div>
                        </form>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <div id="comment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Yorum DetayÄ±</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="comment-detail">
                    <!-- Comment detail will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="approve-comment" class="btn btn-success">
                    <i class="fas fa-check"></i>
                    Onayla
                </button>
                <button id="reject-comment" class="btn btn-danger">
                    <i class="fas fa-times"></i>
                    Reddet
                </button>
                <button class="btn btn-secondary modal-close">Kapat</button>
            </div>
        </div>
    </div>

    <div id="reply-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Yoruma Cevap</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="reply-detail">
                    <!-- Reply form will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="submit-reply" class="btn btn-primary">
                    <i class="fas fa-reply"></i>
                    Cevap GÃ¶nder
                </button>
                <button class="btn btn-secondary modal-close">Kapat</button>
            </div>
        </div>
    </div>

    <div id="message-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Mesaj DetayÄ±</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="message-detail">
                    <!-- Message detail will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="mark-message-read" class="btn btn-primary">
                    <i class="fas fa-check"></i>
                    Okundu Ä°ÅŸaretle
                </button>
                <button class="btn btn-secondary modal-close">Kapat</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>YÃ¼kleniyor...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="../js/comment-system-config.js"></script>
    <script src="../js/comment-system-manager.js"></script>
    <script src="js/admin-auth.js"></script>
    <script src="js/admin-comment-manager.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
