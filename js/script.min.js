!function() {
    "use strict";
  
    // Utility function for DOM ready
    function ready(fn) {
      if (document.readyState !== "loading") {
        fn();
      } else {
        document.addEventListener("DOMContentLoaded", fn);
      }
    }
  
    // Menu button functionality
    ready(function() {
      const menuBtn = document.querySelector(".menu-btn");
      const navLinks = document.querySelector(".nav-links");
  
      if (menuBtn && navLinks) {
        // Toggle menu on button click
        menuBtn.addEventListener("click", function(e) {
          e.preventDefault();
          navLinks.classList.toggle("active");
          menuBtn.setAttribute("aria-expanded", 
            navLinks.classList.contains("active").toString()
          );
        });
  
        // Close menu when clicking outside
        document.addEventListener("click", function(e) {
          if (!menuBtn.contains(e.target) && !navLinks.contains(e.target)) {
            navLinks.classList.remove("active");
            menuBtn.setAttribute("aria-expanded", "false");
          }
        });
  
        // Close menu on escape key
        document.addEventListener("keydown", function(e) {
          if (e.key === "Escape" && navLinks.classList.contains("active")) {
            navLinks.classList.remove("active");
            menuBtn.setAttribute("aria-expanded", "false");
          }
        });
      }
    });
  
    // Scroll-up button functionality
    ready(function() {
      const scrollBtn = document.querySelector(".scroll-up-btn");
      if (scrollBtn) {
        let scrollTimeout;
        
        window.addEventListener("scroll", function() {
          // Debounce scroll events for better performance
          clearTimeout(scrollTimeout);
          scrollTimeout = setTimeout(function() {
            if (window.pageYOffset > 300) {
              scrollBtn.classList.add("show");
            } else {
              scrollBtn.classList.remove("show");
            }
          }, 10);
        }, { passive: true });
  
        scrollBtn.addEventListener("click", function(e) {
          e.preventDefault();
          window.scrollTo({ 
            top: 0, 
            behavior: "smooth" 
          });
        });
      }
    });
  
    // Lazy loading for images
    ready(function() {
      if ("IntersectionObserver" in window) {
        const lazyImages = document.querySelectorAll("img[data-src]");
        
        if (lazyImages.length > 0) {
          const imageObserver = new IntersectionObserver(function(entries, observer) {
            entries.forEach(function(entry) {
              if (entry.isIntersecting) {
                const img = entry.target;
                
                // Load image
                img.src = img.dataset.src;
                img.classList.remove("lazy");
                img.classList.add("loaded");
                
                // Remove data-src attribute after loading
                img.removeAttribute("data-src");
                
                // Stop observing this image
                observer.unobserve(img);
              }
            });
          }, { 
            rootMargin: "50px",
            threshold: 0.1
          });
  
          lazyImages.forEach(function(img) {
            if (img instanceof HTMLImageElement) {
              imageObserver.observe(img);
            }
          });
        }
      } else {
        // Fallback for browsers without IntersectionObserver
        const lazyImages = document.querySelectorAll("img[data-src]");
        lazyImages.forEach(function(img) {
          if (img instanceof HTMLImageElement) {
            img.src = img.dataset.src;
            img.classList.remove("lazy");
            img.classList.add("loaded");
            img.removeAttribute("data-src");
          }
        });
      }
    });
  
    // Performance optimization: Preload critical resources
    ready(function() {
      const criticalLinks = document.querySelectorAll('link[rel="preload"]');
      criticalLinks.forEach(function(link) {
        if (link.href) {
          const img = new Image();
          img.src = link.href;
        }
      });
    });
  
  }();
  